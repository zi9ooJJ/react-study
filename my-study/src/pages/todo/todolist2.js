import Head from "next/head";
import { Inter } from "@next/font/google";
import { useState } from "react";

export default function TodoList() {
  const [newTodo, setNewTodo] = useState({
    title: "",
    desc: "",
  });

  const onChangeNewTodo = (e) => {
    const { name, value } = e.target;
    setNewTodo({
      ...newTodo,
      [name]: value,
    });
  };

  const [todos, setTodos] = useState([
    {
      title: "1",
      desc: "ì•ˆë…•í•˜ì„¸ìš”",
      completed: false,
    },
    {
      title: "2",
      desc: "ì•ˆë…•í•˜ì„¸ìš”2",
      completed: false,
    },
  ]);

  const addTodo = () => {
    setTodos([...todos, { ...newTodo, completed: false }]);
    setNewTodo({
      title: "",
      desc: "",
    });
  };
  const toggleTodo = (title) => {
    const index = todos.findIndex((todo) => todo.title === title);
    const todo = todos.find((todo) => todo.title === title);

    setTodos([
      ...todos.slice(0, index),
      { ...todo, completed: !todo.completed },
      ...todos.slice(index + 1),
    ]);
  };

  const deleteTodo = (title) => {
    // í‰ìƒì‹œì—ëŠ” id ì‚¬ìš©
    const index = todos.findIndex((todo) => todo.title === title);

    // ì‚­ì œ ë°©ë²• 1
    // const deletedTodos = todos.splice(index, 1);
    // setTodos(deletedTodos);

    // ì‚­ì œ ë°©ë²• 2
    setTodos([...todos.slice(0, index), ...todos.slice(index + 1)]);
  };

  return (
    <>
      <Head>
        <title>íˆ¬ë‘ ì•± ë§Œë“¤ê¸°</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <div>
        <h1>íˆ¬ë‘ì—ìš”</h1>
        {todos.map((todo) => (
          <div key={todo.title}>
            <span>{todo.title}</span> | <span>{todo.desc}</span> |
            <span onClick={() => toggleTodo(todo.title)}>
              ({todo.completed ? "ğŸ…¾ï¸" : "â"})
            </span>
            <span onClick={() => deleteTodo(todo.title)}>[ì‚­ì œâŒ]</span>
            {/* <span onClick={() => updateTodo(todo.title)}>[ìˆ˜ì •í•˜ê¸°]</span> */}
          </div>
        ))}
        <br />
        <h1>ìƒˆ íˆ¬ë‘</h1>
        ì œëª©
        <input name="title" onChange={onChangeNewTodo} value={newTodo.title} />
        <br />
        <br />
        ì„¤ëª…
        <input name="desc" onChange={onChangeNewTodo} value={newTodo.desc} />
        <br />
        <br />
        <button onClick={addTodo}>ë§Œë“¤ê¸°</button>
      </div>
    </>
  );
}

// title ì œëª©, desc ë‚´ìš©, complete ì™„ë£Œ ì—¬ë¶€
